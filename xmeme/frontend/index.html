<!DOCTYPE html>
<head>
    <title>XMEME-MEET SHAH</title>
</head>
<body>
    <form id="meetxmeme">
        <label for="Meme-Owner">Meme Owner</label>
        <input type="text" id="Meme-Owner" name="Meme-Owner">

        <label for="Caption">Caption</label>
        <input type="text" id="Caption" name="Caption">

        <label for="Meme-Image">Meme Image</label>
        <input type="text" id="Meme-Image" name="Meme-Image">

        <button type="submit" id="submit">
            Submit
        </button>
    </form>
</body>

<script>

    //add event listener
    const memeform = document.querySelector("#meetxmeme");

    console.log(memeform);
    meetxmeme.addEventListener("submit",function(e) {
        e.preventDefault();
        const headers = {
        "Content-Type": "application/json",
        //"Access-Control-Allow-Origin": "*",
        "Origin": "http://127.0.0.1:8000/",

        };
        body = {
        name: document.getElementById("Meme-Owner").value,
        caption: document.getElementById("Caption").value,
        url: document.getElementById("Meme-Image").value
        }
        const rawResponse = fetch("http://127.0.0.1:8000/api/memes/", {
                method: "POST",
                headers: headers,
                redirect: 'follow', // manual, *follow, error
    			referrerPolicy: 'no-referrer',
                //Access-Control-Allow-Origin: '*',

                mode: "cors",
                body: JSON.stringify(body)

            });
    });

    fetch('http://127.0.0.1:8000/api/memes/')
    .then(response => response.json())
    .then(json => console.log(json));
    
</script>

<script src="viewmemes.js"></script>


